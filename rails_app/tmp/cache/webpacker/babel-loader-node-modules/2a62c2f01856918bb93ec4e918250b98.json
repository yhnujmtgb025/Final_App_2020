{"ast":null,"code":"require(\"jquery\");\n\nrequire(\"jquery-validation\");\n\n$(document).ready(function () {});\n$(\".edit_album\").validate({\n  rules: {\n    \"album[title]\": {\n      required: true\n    }\n  },\n  messages: {\n    \"album[title]\": {\n      required: \"can't be blank\"\n    }\n  }\n});\n\n(function ($) {\n  $(document).ready(function () {\n    generateID();\n    choose();\n    generateOption();\n    selectionOption();\n    removeClass();\n    uploadImage();\n    submit();\n    resetButton();\n    removeNotification();\n    autoRemoveNotification();\n    autoDequeue();\n    var ID;\n    var way = 0;\n    var queue = [];\n    var fullStock = 10;\n    var speedCloseNoti = 1000;\n\n    function generateID() {\n      var text = $('header span');\n      var newID = '';\n\n      for (var i = 0; i < 3; i++) {\n        newID += Math.floor(Math.random() * 3);\n      }\n\n      ID = 'ID: 5988' + newID;\n      text.html(ID);\n    }\n\n    function choose() {\n      var li = $('.ways li');\n      var section = $('.sections section');\n      var index = 0;\n      li.on('click', function () {\n        index = $(this).index();\n        $(this).addClass('active');\n        $(this).siblings().removeClass('active');\n        section.siblings().removeClass('active');\n        section.eq(index).addClass('active');\n\n        if (!way) {\n          way = 1;\n        } else {\n          way = 0;\n        }\n      });\n    }\n\n    function generateOption() {\n      var select = $('select option');\n      var selectAdd = $('.select-option .option');\n      $.each(select, function (i, val) {\n        $('.select-option .option').append('<div rel=\"' + $(val).val() + '\">' + $(val).html() + '</div>');\n      });\n    }\n\n    function selectionOption() {\n      var select = $('.select-option .head');\n      var option = $('.select-option .option div');\n      select.on('click', function (event) {\n        event.stopPropagation();\n        $('.select-option').addClass('active');\n      });\n      option.on('click', function () {\n        var value = $(this).attr('rel');\n        $('.select-option').removeClass('active');\n        select.html(value);\n        $('select#category').val(value);\n      });\n    }\n\n    function removeClass() {\n      $('body').on('click', function () {\n        $('.select-option').removeClass('active');\n      });\n    }\n\n    function uploadImage() {\n      var button = $('.images .pic');\n      var uploader = $('<input type=\"file\" accept=\"image/*\" />');\n      var images = $('.images');\n      button.on('click', function () {\n        uploader.click();\n      });\n      uploader.on('change', function () {\n        var reader = new FileReader();\n\n        reader.onload = function (event) {\n          images.prepend('<div class=\"img\" style=\"background-image: url(\\'' + event.target.result + '\\');\" rel=\"' + event.target.result + '\"><span>remove</span></div>');\n        };\n\n        reader.readAsDataURL(uploader[0].files[0]);\n      });\n      images.on('click', '.img', function () {\n        $(this).remove();\n      });\n    }\n\n    function submit() {\n      var button = $('#send');\n      button.on('click', function () {\n        if (!way) {\n          var title = $('#title');\n          var cate = $('#category');\n          var images = $('.images .img');\n          var imageArr = [];\n\n          for (var i = 0; i < images.length; i++) {\n            imageArr.push({\n              url: $(images[i]).attr('rel')\n            });\n          }\n\n          var newStock = {\n            title: title.val(),\n            category: cate.val(),\n            images: imageArr,\n            type: 1\n          };\n          saveToQueue(newStock);\n        } else {\n          // discussion\n          var topic = $('#topic');\n          var message = $('#msg');\n          var newStock = {\n            title: topic.val(),\n            message: message.val(),\n            type: 2\n          };\n          saveToQueue(newStock);\n        }\n      });\n    }\n\n    function removeNotification() {\n      var close = $('.notification');\n      close.on('click', 'span', function () {\n        var parent = $(this).parent();\n        parent.fadeOut(300);\n        setTimeout(function () {\n          parent.remove();\n        }, 300);\n      });\n    }\n\n    function autoRemoveNotification() {\n      setInterval(function () {\n        var notification = $('.notification');\n        var notiPage = $(notification).children('.btn');\n        var noti = $(notiPage[0]);\n        setTimeout(function () {\n          setTimeout(function () {\n            noti.remove();\n          }, speedCloseNoti);\n          noti.fadeOut(speedCloseNoti);\n        }, speedCloseNoti);\n      }, speedCloseNoti);\n    }\n\n    function autoDequeue() {\n      var notification = $('.notification');\n      var text;\n      setInterval(function () {\n        if (queue.length > 0) {\n          if (queue[0].type == 2) {\n            text = ' Your discusstion is sent';\n          } else {\n            text = ' Your order is allowed.';\n          }\n\n          notification.append('<div class=\"success btn\"><p><strong>Success:</strong>' + text + '</p><span><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></span></div>');\n          queue.splice(0, 1);\n        }\n      }, 10000);\n    }\n\n    function resetButton() {\n      var resetbtn = $('#reset');\n      resetbtn.on('click', function () {\n        reset();\n      });\n    } // helpers\n\n\n    function saveToQueue(stock) {\n      var notification = $('.notification');\n      var check = 0;\n\n      if (queue.length <= fullStock) {\n        if (stock.type == 2) {\n          if (!stock.title || !stock.message) {\n            check = 1;\n          }\n        } else {\n          if (!stock.title || !stock.category || stock.images == 0) {\n            check = 1;\n          }\n        }\n\n        if (check) {\n          notification.append('<div class=\"error btn\"><p><strong>Error:</strong> Please fill in the form.</p><span><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></span></div>');\n        } else {\n          notification.append('<div class=\"success btn\"><p><strong>Success:</strong> ' + ID + ' is submitted.</p><span><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></span></div>');\n          queue.push(stock);\n          reset();\n        }\n      } else {\n        notification.append('<div class=\"error btn\"><p><strong>Error:</strong> Please waiting a queue.</p><span><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></span></div>');\n      }\n    }\n\n    function reset() {\n      $('#title').val('');\n      $('.select-option .head').html('Category');\n      $('select#category').val('');\n      var images = $('.images .img');\n\n      for (var i = 0; i < images.length; i++) {\n        $(images)[i].remove();\n      }\n\n      var topic = $('#topic').val('');\n      var message = $('#msg').val('');\n    }\n  });\n})(jQuery);","map":{"version":3,"sources":["/home/kenzo/Desktop/Final/Fotobook/rails_app/app/javascript/packs/js.js"],"names":["require","$","document","ready","validate","rules","required","messages","generateID","choose","generateOption","selectionOption","removeClass","uploadImage","submit","resetButton","removeNotification","autoRemoveNotification","autoDequeue","ID","way","queue","fullStock","speedCloseNoti","text","newID","i","Math","floor","random","html","li","section","index","on","addClass","siblings","eq","select","selectAdd","each","val","append","option","event","stopPropagation","value","attr","button","uploader","images","click","reader","FileReader","onload","prepend","target","result","readAsDataURL","files","remove","title","cate","imageArr","length","push","url","newStock","category","type","saveToQueue","topic","message","close","parent","fadeOut","setTimeout","setInterval","notification","notiPage","children","noti","splice","resetbtn","reset","stock","check","jQuery"],"mappings":"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","sourcesContent":["require(\"jquery\")\nrequire(\"jquery-validation\")\n\n$(document).ready(function(){\n   \n});\n  \n\n\n\n    $(\".edit_album\").validate({\n      rules:{\n        \"album[title]\":{\n          required:true\n        }\n      },  \n      messages:{\n        \"album[title]\":{\n          required: \"can't be blank\"\n        } \n      }\n    });\n\n\n\n    (function ($) {\n      $(document).ready(function () {\n        \n        generateID()\n        choose()\n        generateOption()\n        selectionOption()\n        removeClass()\n        uploadImage()\n        submit()\n        resetButton()\n        removeNotification()\n        autoRemoveNotification()\n        autoDequeue()\n        \n        var ID\n        var way = 0\n        var queue = []\n        var fullStock = 10\n        var speedCloseNoti = 1000\n        \n        function generateID() {\n          var text = $('header span')\n          var newID = ''\n        \n          for(var i = 0; i < 3; i++) {\n            newID += Math.floor(Math.random() * 3)\n          }\n          \n          ID = 'ID: 5988' + newID\n          text.html(ID)\n        }\n        \n        function choose() {\n          var li = $('.ways li')\n          var section = $('.sections section')\n          var index = 0\n          li.on('click', function () {\n            index = $(this).index()\n            $(this).addClass('active')\n            $(this).siblings().removeClass('active')\n            \n            section.siblings().removeClass('active')\n            section.eq(index).addClass('active')\n            if(!way) {\n              way = 1\n            }  else {\n              way = 0\n            }\n          })\n        }\n        \n        function generateOption() {\n          var select = $('select option')\n          var selectAdd = $('.select-option .option')\n          $.each(select, function (i, val) {\n              $('.select-option .option').append('<div rel=\"'+ $(val).val() +'\">'+ $(val).html() +'</div>')\n          })\n        }\n        \n        function selectionOption() {\n          var select = $('.select-option .head')\n          var option = $('.select-option .option div')\n        \n          select.on('click', function (event) {\n            event.stopPropagation()\n            $('.select-option').addClass('active')\n          })\n          \n          option.on('click', function () {\n            var value = $(this).attr('rel')\n            $('.select-option').removeClass('active')  \n            select.html(value)\n        \n            $('select#category').val(value)\n          })\n        }\n        \n        function removeClass() {\n          $('body').on('click', function () { \n            $('.select-option').removeClass('active')   \n          })                  \n        }\n        \n        function uploadImage() {\n          var button = $('.images .pic')\n          var uploader = $('<input type=\"file\" accept=\"image/*\" />')\n          var images = $('.images')\n          \n          button.on('click', function () {\n            uploader.click()\n          })\n          \n          uploader.on('change', function () {\n              var reader = new FileReader()\n              reader.onload = function(event) {\n                images.prepend('<div class=\"img\" style=\"background-image: url(\\'' + event.target.result + '\\');\" rel=\"'+ event.target.result  +'\"><span>remove</span></div>')\n              }\n              reader.readAsDataURL(uploader[0].files[0])\n      \n           })\n          \n          images.on('click', '.img', function () {\n            $(this).remove()\n          })\n        \n        }\n        \n        function submit() {  \n          var button = $('#send')\n          \n          button.on('click', function () {\n            if(!way) {\n              var title = $('#title')\n              var cate  = $('#category')\n              var images = $('.images .img')\n              var imageArr = []\n    \n              \n              for(var i = 0; i < images.length; i++) {\n                imageArr.push({url: $(images[i]).attr('rel')})\n              }\n              \n              var newStock = {\n                title: title.val(),\n                category: cate.val(),\n                images: imageArr,\n                type: 1\n              }\n              \n              saveToQueue(newStock)\n            } else {\n              // discussion\n              var topic = $('#topic')\n              var message = $('#msg')\n              \n              var newStock = {\n                title: topic.val(),\n                message: message.val(),\n                type: 2\n              }\n              \n              saveToQueue(newStock)\n            }\n          })\n        }\n        \n        function removeNotification() {\n          var close = $('.notification')\n          close.on('click', 'span', function () {\n            var parent = $(this).parent()\n            parent.fadeOut(300)\n            setTimeout(function() {\n              parent.remove()\n            }, 300)\n          })\n        }\n        \n        function autoRemoveNotification() {\n          setInterval(function() {\n            var notification = $('.notification')\n            var notiPage = $(notification).children('.btn')\n            var noti = $(notiPage[0])\n            \n            setTimeout(function () {\n              setTimeout(function () {\n               noti.remove()\n              }, speedCloseNoti)\n              noti.fadeOut(speedCloseNoti)\n            }, speedCloseNoti)\n          }, speedCloseNoti)\n        }\n        \n        function autoDequeue() {\n          var notification = $('.notification')\n          var text\n          \n          setInterval(function () {\n    \n              if(queue.length > 0) {\n                if(queue[0].type == 2) {\n                  text = ' Your discusstion is sent'\n                } else {\n                  text = ' Your order is allowed.'\n                }\n                \n                notification.append('<div class=\"success btn\"><p><strong>Success:</strong>'+ text +'</p><span><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></span></div>')\n                queue.splice(0, 1)\n                \n              }  \n          }, 10000)\n        }\n        \n        function resetButton() {\n          var resetbtn = $('#reset')\n          resetbtn.on('click', function () {\n            reset()\n          })\n        }\n        \n        // helpers\n        function saveToQueue(stock) {\n          var notification = $('.notification')\n          var check = 0\n          \n          if(queue.length <= fullStock) {\n            if(stock.type == 2) {\n                if(!stock.title || !stock.message) {\n                  check = 1\n                }\n            } else {\n              if(!stock.title || !stock.category || stock.images == 0) {\n                check = 1\n              }\n            }\n            \n            if(check) {\n              notification.append('<div class=\"error btn\"><p><strong>Error:</strong> Please fill in the form.</p><span><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></span></div>')\n            } else {\n              notification.append('<div class=\"success btn\"><p><strong>Success:</strong> '+ ID +' is submitted.</p><span><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></span></div>')\n              queue.push(stock)\n              reset()\n            }\n          } else {\n            notification.append('<div class=\"error btn\"><p><strong>Error:</strong> Please waiting a queue.</p><span><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></span></div>')\n          } \n        }\n        function reset() {\n          \n          $('#title').val('')\n          $('.select-option .head').html('Category')\n          $('select#category').val('')\n          \n          var images = $('.images .img')\n          for(var i = 0; i < images.length; i++) {\n            $(images)[i].remove()\n          }\n          \n          var topic = $('#topic').val('')\n          var message = $('#msg').val('')\n        }\n      })\n    })(jQuery)\n  \n\n\n\n\n"]},"metadata":{},"sourceType":"module"}