{"ast":null,"code":"require(\"jquery\");\n\nrequire(\"jquery-validation\");\n\n$(document).ready(function () {\n  $('.card-img').click(function () {\n    var img = $(this).attr('src');\n    $('#imgModal').attr('src', img);\n    var parent = $(this).closest(\".hello\");\n    var title = parent.find(\".tit\").text();\n    var description = parent.find(\".des\").text();\n    $('#modalTittle').text(title);\n    $('#modalDescription').text(description);\n  });\n});\n$(\".edit_album\").validate({\n  rules: {\n    \"album[title]\": {\n      required: true\n    }\n  },\n  messages: {\n    \"album[title]\": {\n      required: \"can't be blank\"\n    }\n  }\n});\n\n(function ($) {\n  $(document).ready(function () {\n    generateID();\n    choose();\n    generateOption();\n    selectionOption();\n    removeClass();\n    uploadImage();\n    submit();\n    resetButton();\n    removeNotification();\n    autoRemoveNotification();\n    autoDequeue();\n    var ID;\n    var way = 0;\n    var queue = [];\n    var fullStock = 10;\n    var speedCloseNoti = 1000;\n\n    function generateID() {\n      var text = $('header span');\n      var newID = '';\n\n      for (var i = 0; i < 3; i++) {\n        newID += Math.floor(Math.random() * 3);\n      }\n\n      ID = 'ID: 5988' + newID;\n      text.html(ID);\n    }\n\n    function choose() {\n      var li = $('.ways li');\n      var section = $('.sections section');\n      var index = 0;\n      li.on('click', function () {\n        index = $(this).index();\n        $(this).addClass('active');\n        $(this).siblings().removeClass('active');\n        section.siblings().removeClass('active');\n        section.eq(index).addClass('active');\n\n        if (!way) {\n          way = 1;\n        } else {\n          way = 0;\n        }\n      });\n    }\n\n    function generateOption() {\n      var select = $('select option');\n      var selectAdd = $('.select-option .option');\n      $.each(select, function (i, val) {\n        $('.select-option .option').append('<div rel=\"' + $(val).val() + '\">' + $(val).html() + '</div>');\n      });\n    }\n\n    function selectionOption() {\n      var select = $('.select-option .head');\n      var option = $('.select-option .option div');\n      select.on('click', function (event) {\n        event.stopPropagation();\n        $('.select-option').addClass('active');\n      });\n      option.on('click', function () {\n        var value = $(this).attr('rel');\n        $('.select-option').removeClass('active');\n        select.html(value);\n        $('select#category').val(value);\n      });\n    }\n\n    function removeClass() {\n      $('body').on('click', function () {\n        $('.select-option').removeClass('active');\n      });\n    }\n\n    function uploadImage() {\n      var button = $('.images .pic');\n      var uploader = $('<input type=\"file\" accept=\"image/*\" />');\n      var images = $('.images');\n      button.on('click', function () {\n        uploader.click();\n      });\n      uploader.on('change', function () {\n        var reader = new FileReader();\n\n        reader.onload = function (event) {\n          images.prepend('<div class=\"img\" style=\"background-image: url(\\'' + event.target.result + '\\');\" rel=\"' + event.target.result + '\"><span>remove</span></div>');\n        };\n\n        reader.readAsDataURL(uploader[0].files[0]);\n      });\n      images.on('click', '.img', function () {\n        $(this).remove();\n      });\n    }\n\n    function submit() {\n      var button = $('#send');\n      button.on('click', function () {\n        if (!way) {\n          var title = $('#title');\n          var cate = $('#category');\n          var images = $('.images .img');\n          var imageArr = [];\n\n          for (var i = 0; i < images.length; i++) {\n            imageArr.push({\n              url: $(images[i]).attr('rel')\n            });\n          }\n\n          var newStock = {\n            title: title.val(),\n            category: cate.val(),\n            images: imageArr,\n            type: 1\n          };\n          saveToQueue(newStock);\n        } else {\n          // discussion\n          var topic = $('#topic');\n          var message = $('#msg');\n          var newStock = {\n            title: topic.val(),\n            message: message.val(),\n            type: 2\n          };\n          saveToQueue(newStock);\n        }\n      });\n    }\n\n    function removeNotification() {\n      var close = $('.notification');\n      close.on('click', 'span', function () {\n        var parent = $(this).parent();\n        parent.fadeOut(300);\n        setTimeout(function () {\n          parent.remove();\n        }, 300);\n      });\n    }\n\n    function autoRemoveNotification() {\n      setInterval(function () {\n        var notification = $('.notification');\n        var notiPage = $(notification).children('.btn');\n        var noti = $(notiPage[0]);\n        setTimeout(function () {\n          setTimeout(function () {\n            noti.remove();\n          }, speedCloseNoti);\n          noti.fadeOut(speedCloseNoti);\n        }, speedCloseNoti);\n      }, speedCloseNoti);\n    }\n\n    function autoDequeue() {\n      var notification = $('.notification');\n      var text;\n      setInterval(function () {\n        if (queue.length > 0) {\n          if (queue[0].type == 2) {\n            text = ' Your discusstion is sent';\n          } else {\n            text = ' Your order is allowed.';\n          }\n\n          notification.append('<div class=\"success btn\"><p><strong>Success:</strong>' + text + '</p><span><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></span></div>');\n          queue.splice(0, 1);\n        }\n      }, 10000);\n    }\n\n    function resetButton() {\n      var resetbtn = $('#reset');\n      resetbtn.on('click', function () {\n        reset();\n      });\n    } // helpers\n\n\n    function saveToQueue(stock) {\n      var notification = $('.notification');\n      var check = 0;\n\n      if (queue.length <= fullStock) {\n        if (stock.type == 2) {\n          if (!stock.title || !stock.message) {\n            check = 1;\n          }\n        } else {\n          if (!stock.title || !stock.category || stock.images == 0) {\n            check = 1;\n          }\n        }\n\n        if (check) {\n          notification.append('<div class=\"error btn\"><p><strong>Error:</strong> Please fill in the form.</p><span><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></span></div>');\n        } else {\n          notification.append('<div class=\"success btn\"><p><strong>Success:</strong> ' + ID + ' is submitted.</p><span><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></span></div>');\n          queue.push(stock);\n          reset();\n        }\n      } else {\n        notification.append('<div class=\"error btn\"><p><strong>Error:</strong> Please waiting a queue.</p><span><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></span></div>');\n      }\n    }\n\n    function reset() {\n      $('#title').val('');\n      $('.select-option .head').html('Category');\n      $('select#category').val('');\n      var images = $('.images .img');\n\n      for (var i = 0; i < images.length; i++) {\n        $(images)[i].remove();\n      }\n\n      var topic = $('#topic').val('');\n      var message = $('#msg').val('');\n    }\n  });\n})(jQuery);","map":{"version":3,"sources":["/home/kenzo/Desktop/Final/Fotobook/rails_app/app/javascript/packs/js.js"],"names":["require","$","document","ready","click","img","attr","parent","closest","title","find","text","description","validate","rules","required","messages","generateID","choose","generateOption","selectionOption","removeClass","uploadImage","submit","resetButton","removeNotification","autoRemoveNotification","autoDequeue","ID","way","queue","fullStock","speedCloseNoti","newID","i","Math","floor","random","html","li","section","index","on","addClass","siblings","eq","select","selectAdd","each","val","append","option","event","stopPropagation","value","button","uploader","images","reader","FileReader","onload","prepend","target","result","readAsDataURL","files","remove","cate","imageArr","length","push","url","newStock","category","type","saveToQueue","topic","message","close","fadeOut","setTimeout","setInterval","notification","notiPage","children","noti","splice","resetbtn","reset","stock","check","jQuery"],"mappings":"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","sourcesContent":["require(\"jquery\")\nrequire(\"jquery-validation\")\n\n$(document).ready(function(){\n  $('.card-img').click(function() {\n      var img = $(this).attr('src');\n      $('#imgModal').attr('src',img);\n      var parent = $(this).closest(\".hello\");\n      var title = parent.find(\".tit\").text();\n      var description = parent.find(\".des\").text();\n       $('#modalTittle').text(title);\n       $('#modalDescription').text(description);\n  });\n});\n  \n\n  \n\n\n\n    $(\".edit_album\").validate({\n      rules:{\n        \"album[title]\":{\n          required:true\n        }\n      },  \n      messages:{\n        \"album[title]\":{\n          required: \"can't be blank\"\n        } \n      }\n    });\n\n\n\n    (function ($) {\n      $(document).ready(function () {\n        \n        generateID()\n        choose()\n        generateOption()\n        selectionOption()\n        removeClass()\n        uploadImage()\n        submit()\n        resetButton()\n        removeNotification()\n        autoRemoveNotification()\n        autoDequeue()\n        \n        var ID\n        var way = 0\n        var queue = []\n        var fullStock = 10\n        var speedCloseNoti = 1000\n        \n        function generateID() {\n          var text = $('header span')\n          var newID = ''\n        \n          for(var i = 0; i < 3; i++) {\n            newID += Math.floor(Math.random() * 3)\n          }\n          \n          ID = 'ID: 5988' + newID\n          text.html(ID)\n        }\n        \n        function choose() {\n          var li = $('.ways li')\n          var section = $('.sections section')\n          var index = 0\n          li.on('click', function () {\n            index = $(this).index()\n            $(this).addClass('active')\n            $(this).siblings().removeClass('active')\n            \n            section.siblings().removeClass('active')\n            section.eq(index).addClass('active')\n            if(!way) {\n              way = 1\n            }  else {\n              way = 0\n            }\n          })\n        }\n        \n        function generateOption() {\n          var select = $('select option')\n          var selectAdd = $('.select-option .option')\n          $.each(select, function (i, val) {\n              $('.select-option .option').append('<div rel=\"'+ $(val).val() +'\">'+ $(val).html() +'</div>')\n          })\n        }\n        \n        function selectionOption() {\n          var select = $('.select-option .head')\n          var option = $('.select-option .option div')\n        \n          select.on('click', function (event) {\n            event.stopPropagation()\n            $('.select-option').addClass('active')\n          })\n          \n          option.on('click', function () {\n            var value = $(this).attr('rel')\n            $('.select-option').removeClass('active')  \n            select.html(value)\n        \n            $('select#category').val(value)\n          })\n        }\n        \n        function removeClass() {\n          $('body').on('click', function () { \n            $('.select-option').removeClass('active')   \n          })                  \n        }\n        \n        function uploadImage() {\n          var button = $('.images .pic')\n          var uploader = $('<input type=\"file\" accept=\"image/*\" />')\n          var images = $('.images')\n          \n          button.on('click', function () {\n            uploader.click()\n          })\n          \n          uploader.on('change', function () {\n              var reader = new FileReader()\n              reader.onload = function(event) {\n                images.prepend('<div class=\"img\" style=\"background-image: url(\\'' + event.target.result + '\\');\" rel=\"'+ event.target.result  +'\"><span>remove</span></div>')\n              }\n              reader.readAsDataURL(uploader[0].files[0])\n      \n           })\n          \n          images.on('click', '.img', function () {\n            $(this).remove()\n          })\n        \n        }\n        \n        function submit() {  \n          var button = $('#send')\n          \n          button.on('click', function () {\n            if(!way) {\n              var title = $('#title')\n              var cate  = $('#category')\n              var images = $('.images .img')\n              var imageArr = []\n    \n              \n              for(var i = 0; i < images.length; i++) {\n                imageArr.push({url: $(images[i]).attr('rel')})\n              }\n              \n              var newStock = {\n                title: title.val(),\n                category: cate.val(),\n                images: imageArr,\n                type: 1\n              }\n              \n              saveToQueue(newStock)\n            } else {\n              // discussion\n              var topic = $('#topic')\n              var message = $('#msg')\n              \n              var newStock = {\n                title: topic.val(),\n                message: message.val(),\n                type: 2\n              }\n              \n              saveToQueue(newStock)\n            }\n          })\n        }\n        \n        function removeNotification() {\n          var close = $('.notification')\n          close.on('click', 'span', function () {\n            var parent = $(this).parent()\n            parent.fadeOut(300)\n            setTimeout(function() {\n              parent.remove()\n            }, 300)\n          })\n        }\n        \n        function autoRemoveNotification() {\n          setInterval(function() {\n            var notification = $('.notification')\n            var notiPage = $(notification).children('.btn')\n            var noti = $(notiPage[0])\n            \n            setTimeout(function () {\n              setTimeout(function () {\n               noti.remove()\n              }, speedCloseNoti)\n              noti.fadeOut(speedCloseNoti)\n            }, speedCloseNoti)\n          }, speedCloseNoti)\n        }\n        \n        function autoDequeue() {\n          var notification = $('.notification')\n          var text\n          \n          setInterval(function () {\n    \n              if(queue.length > 0) {\n                if(queue[0].type == 2) {\n                  text = ' Your discusstion is sent'\n                } else {\n                  text = ' Your order is allowed.'\n                }\n                \n                notification.append('<div class=\"success btn\"><p><strong>Success:</strong>'+ text +'</p><span><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></span></div>')\n                queue.splice(0, 1)\n                \n              }  \n          }, 10000)\n        }\n        \n        function resetButton() {\n          var resetbtn = $('#reset')\n          resetbtn.on('click', function () {\n            reset()\n          })\n        }\n        \n        // helpers\n        function saveToQueue(stock) {\n          var notification = $('.notification')\n          var check = 0\n          \n          if(queue.length <= fullStock) {\n            if(stock.type == 2) {\n                if(!stock.title || !stock.message) {\n                  check = 1\n                }\n            } else {\n              if(!stock.title || !stock.category || stock.images == 0) {\n                check = 1\n              }\n            }\n            \n            if(check) {\n              notification.append('<div class=\"error btn\"><p><strong>Error:</strong> Please fill in the form.</p><span><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></span></div>')\n            } else {\n              notification.append('<div class=\"success btn\"><p><strong>Success:</strong> '+ ID +' is submitted.</p><span><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></span></div>')\n              queue.push(stock)\n              reset()\n            }\n          } else {\n            notification.append('<div class=\"error btn\"><p><strong>Error:</strong> Please waiting a queue.</p><span><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></span></div>')\n          } \n        }\n        function reset() {\n          \n          $('#title').val('')\n          $('.select-option .head').html('Category')\n          $('select#category').val('')\n          \n          var images = $('.images .img')\n          for(var i = 0; i < images.length; i++) {\n            $(images)[i].remove()\n          }\n          \n          var topic = $('#topic').val('')\n          var message = $('#msg').val('')\n        }\n      })\n    })(jQuery)\n  \n\n\n\n\n"]},"metadata":{},"sourceType":"module"}